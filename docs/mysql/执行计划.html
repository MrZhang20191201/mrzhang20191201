<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.67">
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				document.documentElement.classList.toggle('dark', true);
			}
    </script>
    <link rel="icon" href="/images/vite.svg"><title>1 查看执行计划命令 | 小达人</title><meta name="description" content="vue3">
    <link rel="preload" href="/assets/style-94ba31cc.css" as="style"><link rel="stylesheet" href="/assets/style-94ba31cc.css">
    <link rel="modulepreload" href="/assets/app-fd12c636.js"><link rel="modulepreload" href="/assets/执行计划.html-4799d327.js"><link rel="modulepreload" href="/assets/执行计划.html-3abe35f5.js"><link rel="prefetch" href="/assets/index.html-9a66ac6e.js" as="script"><link rel="prefetch" href="/assets/windows安装配置.html-26c4adfc.js" as="script"><link rel="prefetch" href="/assets/索引介绍.html-b1f63550.js" as="script"><link rel="prefetch" href="/assets/Windows安装配置.html-4c6c2f81.js" as="script"><link rel="prefetch" href="/assets/Axios.html-dfe41ca5.js" as="script"><link rel="prefetch" href="/assets/MockJs.html-fbbc809a.js" as="script"><link rel="prefetch" href="/assets/TypeScript.html-3bb407f9.js" as="script"><link rel="prefetch" href="/assets/VueRouter.html-bc053e54.js" as="script"><link rel="prefetch" href="/assets/Vuex.html-b8386765.js" as="script"><link rel="prefetch" href="/assets/动画技巧.html-2de70573.js" as="script"><link rel="prefetch" href="/assets/性能优化.html-d48ccc52.js" as="script"><link rel="prefetch" href="/assets/自定义插件.html-f0d5ccff.js" as="script"><link rel="prefetch" href="/assets/自定义组件库.html-51d48499.js" as="script"><link rel="prefetch" href="/assets/自定义脚手架.html-3eda717b.js" as="script"><link rel="prefetch" href="/assets/指令介绍.html-6e075228.js" as="script"><link rel="prefetch" href="/assets/文档介绍.html-1fd8b093.js" as="script"><link rel="prefetch" href="/assets/渲染机制.html-d2dd8848.js" as="script"><link rel="prefetch" href="/assets/生命周期.html-b594d33c.js" as="script"><link rel="prefetch" href="/assets/组件介绍.html-6da52386.js" as="script"><link rel="prefetch" href="/assets/项目搭建.html-2583b482.js" as="script"><link rel="prefetch" href="/assets/404.html-f9875e7b.js" as="script"><link rel="prefetch" href="/assets/index.html-3f3c34d2.js" as="script"><link rel="prefetch" href="/assets/windows安装配置.html-b7876586.js" as="script"><link rel="prefetch" href="/assets/索引介绍.html-2934dbb3.js" as="script"><link rel="prefetch" href="/assets/Windows安装配置.html-404c9153.js" as="script"><link rel="prefetch" href="/assets/Axios.html-f1661519.js" as="script"><link rel="prefetch" href="/assets/MockJs.html-fe5b3c23.js" as="script"><link rel="prefetch" href="/assets/TypeScript.html-ba49cd64.js" as="script"><link rel="prefetch" href="/assets/VueRouter.html-ef937be7.js" as="script"><link rel="prefetch" href="/assets/Vuex.html-29e6de9c.js" as="script"><link rel="prefetch" href="/assets/动画技巧.html-b9fbb72f.js" as="script"><link rel="prefetch" href="/assets/性能优化.html-e92cd302.js" as="script"><link rel="prefetch" href="/assets/自定义插件.html-993a75c4.js" as="script"><link rel="prefetch" href="/assets/自定义组件库.html-93be695c.js" as="script"><link rel="prefetch" href="/assets/自定义脚手架.html-4938c264.js" as="script"><link rel="prefetch" href="/assets/指令介绍.html-0009fe94.js" as="script"><link rel="prefetch" href="/assets/文档介绍.html-e9864012.js" as="script"><link rel="prefetch" href="/assets/渲染机制.html-0437e0fd.js" as="script"><link rel="prefetch" href="/assets/生命周期.html-1b3b51d8.js" as="script"><link rel="prefetch" href="/assets/组件介绍.html-8189f319.js" as="script"><link rel="prefetch" href="/assets/项目搭建.html-1f4a004b.js" as="script"><link rel="prefetch" href="/assets/404.html-60015ac7.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container no-sidebar"><!--[--><header class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/" class=""><img class="logo" src="/images/logo.png" alt="小达人"><span class="site-name can-hide">小达人</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><nav class="navbar-items can-hide"><!--[--><div class="navbar-item"><a href="/" class="" aria-label="首页"><!--[--><!--]--> 首页 <!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="官方文档"><span class="title">官方文档</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="官方文档"><span class="title">官方文档</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a class="external-link" href="https://cn.vuejs.org/guide/introduction.html" rel="noopener noreferrer" target="_blank" aria-label="vue3"><!--[--><!--]--> vue3 <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="文档"><span class="title">文档</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="文档"><span class="title">文档</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/docs/vue3/基础/文档介绍.md" class="" aria-label="vue3"><!--[--><!--]--> vue3 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/docs/nodejs/Windows安装配置.md" class="" aria-label="nodejs"><!--[--><!--]--> nodejs <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/docs/mysql/windows安装配置.md" class="" aria-label="mysql"><!--[--><!--]--> mysql <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Select language"><span class="title">Languages</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Select language"><span class="title">Languages</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a aria-current="page" href="/docs/mysql/%E6%89%A7%E8%A1%8C%E8%AE%A1%E5%88%92.html" class="router-link-active router-link-exact-active router-link-active" aria-label="简体中文"><!--[--><!--]--> 简体中文 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/en/" class="" aria-label="English"><!--[--><!--]--> English <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><a class="external-link" href="https://github.com" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button class="toggle-color-mode-button" title="toggle color mode"><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!----></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-items"><!--[--><div class="navbar-item"><a href="/" class="" aria-label="首页"><!--[--><!--]--> 首页 <!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="官方文档"><span class="title">官方文档</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="官方文档"><span class="title">官方文档</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a class="external-link" href="https://cn.vuejs.org/guide/introduction.html" rel="noopener noreferrer" target="_blank" aria-label="vue3"><!--[--><!--]--> vue3 <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="文档"><span class="title">文档</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="文档"><span class="title">文档</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/docs/vue3/基础/文档介绍.md" class="" aria-label="vue3"><!--[--><!--]--> vue3 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/docs/nodejs/Windows安装配置.md" class="" aria-label="nodejs"><!--[--><!--]--> nodejs <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/docs/mysql/windows安装配置.md" class="" aria-label="mysql"><!--[--><!--]--> mysql <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Select language"><span class="title">Languages</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Select language"><span class="title">Languages</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a aria-current="page" href="/docs/mysql/%E6%89%A7%E8%A1%8C%E8%AE%A1%E5%88%92.html" class="router-link-active router-link-exact-active router-link-active" aria-label="简体中文"><!--[--><!--]--> 简体中文 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/en/" class="" aria-label="English"><!--[--><!--]--> English <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><a class="external-link" href="https://github.com" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><!----><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><!--]--><div><h1 id="_1-查看执行计划命令" tabindex="-1"><a class="header-anchor" href="#_1-查看执行计划命令" aria-hidden="true">#</a> 1 查看执行计划命令</h1><p>explain + SQL</p><p>2 执行计划中各个字段的含义 2.1 id 表示执行顺序，id的数字越大越先执行，如果数字一样，那么从上往下依次执行，如果为null表示这是一个结果集，不需要用它来进行查询。</p><p>2.2 select_type 查询的类型，主要是用于区分普通查询、联合查询、子查询等复杂的查询</p><p>取值 含义 simple 简单的select查询，查询中不包含子查询或者union primary 查询中包含任何复杂的子部分，最外层查询则被标记为primary union 若第二个select出现在union之后，则被标记为union；若union包含在from子句的子查询中，外层select将被标记为derived dependent union 与union一样，出现在union 或union all语句中，但是这个查询要受到外部查询的影响 union result 包含union的结果集，在union和union all语句中,因为它不需要参与查询，所以id字段为null subquery 在select 或 where列表中包含了子查询 dependent subquery 与dependent union类似，表示这个subquery的查询要受到外部表查询的影响 derived 在from列表中包含的子查询被标记为derived（衍生），mysql或递归执行这些子查询，把结果放在临时表里 2.3 table 显示的查询表名，如果查询使用了别名，那么这里显示的是别名，如果不涉及对数据表的操作，那么这显示为null，如果显示为尖括号括起来的就表示这个是临时表，后边的N就是执行计划中的id，表示结果来自于这个查询产生。如果是尖括号括起来的&lt;union M,N&gt;，与类似，也是一个临时表，表示这个结果来自于union查询的id为M,N的结果集。</p><p>2.4 type MySQL的官网解释为：连接类型(the join type)。它描述了找到所需数据使用的扫描方式。 访问类型，sql查询优化中一个很重要的指标，结果值从好到坏依次是： system &gt; const &gt; eq_ref &gt; ref &gt; fulltext &gt; ref_or_null &gt; index_merge &gt; unique_subquery &gt; index_subquery &gt; range &gt; index &gt; ALL,除了all之外，其他的type都可以使用到索引，除了index_merge之外，其他的type只可以用到一个索引</p><p>2.4.1 扫描方式汇总 取值 含义 system 系统表，少量数据，往往不需要进行磁盘IO const 常量连接 eq_ref 主键索引(primary key)或者非空唯一索引(unique not null)等值扫描 ref 非主键非唯一索引等值扫描 ref_or_null 与ref方法类似，只是增加了null值的比较。实际用的不多 range 范围扫描 index 索引树扫描 index_merge 表示查询使用了两个以上的索引，最后取交集或者并集 fulltext 全文索引检索 unique_subquery 用于where中的in形式子查询，子查询返回不重复值唯一值 index_subquery 用于in形式子查询,子查询可能返回重复值，可以使用索引将子查询去重 ALL 全表扫描(full table scan)</p><p>2.4.2 扫描方式详解 2.4.2.1 system 扫码类型为system，说明数据已经加载到内存里，不需要进行磁盘IO。 这类扫描是速度最快的。但是我没有遇到过，遇到了我再来补充！</p><p>2.4.2.2 const explain select id from billing_item_dis where id =1; 1 const扫描的条件为：</p><p>命中主键(primary key)或者唯一(unique)索引； 被连接的部分是一个常量(const)值； 2.4.2.3 eq_ref eq_ref扫描的条件为：对于前表的每一行(row)，后表只有一行被扫描。 出现在要连接过个表的查询计划中，驱动表只返回一行数据，且这行数据是第二个表的主键或者唯一索引，且必须为not null，唯一索引和主键是多列时，只有所有的列都用作比较时才会出现eq_ref</p><p>2.4.2.4 ref explain select * from billing_item_dis t1,billing_item_reslut t2 where t1.id = t2.binli_id; 1 对于前表的每一行(row)，后表可能有多于一行的数据被扫描。 不像eq_ref那样要求连接顺序，也没有主键和唯一索引的要求，只要使用相等条件检索时就可能出现，常见与辅助索引的等值查找。或者多列主键、唯一索引中，使用第一个列之外的列作为等值查找也会出现，总之，返回数据不唯一的等值查找就可能出现</p><p>2.4.2.5 range explain select * from billing_item_dis where id &gt; 4; 1 索引范围扫描，常见于使用&gt;,&lt;,is null,between ,in ,like等运算符的查询中。</p><p>2.4.2.6 index explain select id from billing_item_dis; 1 索引全表扫描，把索引从头到尾扫一遍，常见于使用索引列就可以处理不需要读取数据文件的查询、可以使用索引排序或者分组的查询。</p><p>2.4.2.7 all explain select * from billing_item_dis; 1 这个就是全表扫描数据文件，然后再在server层进行过滤返回符合要求的记录。</p><p>2.5 possible_keys 查询涉及到的字段上存在索引，则该索引将被列出，但不一定被查询实际使用</p><p>2.6 key 实际使用的索引，如果为NULL，则没有使用索引。 查询中如果使用了覆盖索引，则该索引仅出现在key列表中</p><p>2.7 key_len 用于处理查询的索引长度，如果是单列索引，那就整个索引长度算进去，如果是多列索引，那么查询不一定都能使用到所有的列，具体使用到了多少个列的索引，这里就会计算进去，没有使用到的列，这里不会计算进去。留意下这个列的值，算一下你的多列索引总长度就知道有没有使用到所有的列了。要注意，mysql的ICP特性使用到的索引不会计入其中。另外，key_len只计算where条件用到的索引长度，而排序和分组就算用到了索引，也不会计算到key_len中。</p><p>2.8 ref 如果是使用的常数等值查询，这里会显示const，如果是连接查询，被驱动表的执行计划这里会显示驱动表的关联字段，如果是条件使用了表达式或者函数，或者条件列发生了内部隐式转换，这里可能显示为func</p><p>2.9 rows 根据表统计信息及索引选用情况，大致估算出找到所需的记录所需要读取的行数</p><p>2.10 Extra 取值 含义 举例 Using where Extra为Using where说明， SQL使用了where条件过滤数据。 explain select * from billing_item_dis where id &gt; 4; Using index Extra为Using index说明， SQL所需要返回的所有列数据均在一棵索引树上， 而无需访问实际的行记录。 explain select id from billing_item_dis; Using index condition Extra为Using index condition说明， 确实命中了索引，但不是所有的 列数据都在索引树上，还需要访问实际的行记录。 explain select * from billing_item_dis t1, billing_item_result t2 where t1.user_id = t2.id; Using filesort Extra为Using filesort说明，得到所需结果集， 需要对所有记录进行文件排序。典型的，在一个没有建立索引的列上进行了order by，就会触发，常见的优化方案是，在order by的列上添加索引，避免每次查询都全量排序。 explain select id from billing_item_dis order by item_name; Using temporary Extra为Using temporary说明， 需要建立临时表(temporary table)来暂存中间结果。 这类SQL语句性能较低，往往也需要进行优化。 典型的，group by和order by同时存在，且作用于不同的字段时，就会建立临时表，以便计算出最终的结果集。 explain select item_name, COUNT(*) from billing_item_dis GROUP BY item_name order by item_name;</p></div><!--[--><!--]--></div><footer class="page-meta"><!----><!----><!----></footer><!----><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script type="module" src="/assets/app-fd12c636.js" defer></script>
  </body>
</html>
